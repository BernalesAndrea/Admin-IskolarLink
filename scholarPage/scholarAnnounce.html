<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scholar • Announcements</title>
  <script src="/assets/js/notifications.js" defer></script>
  <style>
    :root{
      --gold:#D4A017;   /* golden yellow */
      --maroon:#800000; /* maroon red */
      --maroon-dark:#5a0000;
    }

    *{
      margin:0; padding:0; outline:none; border:none; text-decoration:none; box-sizing:border-box;
      font-family:Arial, Helvetica, sans-serif;
    }

    html, body { height:100%; }

    body{
      min-height:100vh;
      display:flex;
      flex-direction:column; /* header / main / footer */
      background-image:url('/assets/iskolarbg.png');
      background-size:cover;
      background-position:center;
      background-repeat:no-repeat;
    }

        /* ===== HEADER ===== */
.site-header {
  background: var(--maroon);
  border-bottom: 2px solid var(--maroon-dark);
}

.header-wrap {
  max-width: 1200px;
  margin: 0 auto;
  padding: 10px 16px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.header-center {
  display: flex;
  align-items: center;
  gap: 18px;
  flex-wrap: nowrap;          /* prevent wrapping so both logos stay visible */
}

.header-logo{
  display: inline-block;         /* ensure width/height apply */
  width: 64px;
  height: 64px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;      /* fit the whole PNG */
  flex: 0 0 auto;
}

/* point to the files */
.logo-city { background-image: url('/assets/citylogo.png'); }
.logo-isko { background-image: url('/assets/iskologo.png'); }


.header-logo:focus-visible { box-shadow: 0 0 0 3px rgba(212,160,23,.55); }

/* Brand text is plain text (not links) */
.brand-block {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  color: #fff;
  min-width: 0;                /* allow text to shrink before logos */
}
.brand-title {
  color: #fff;
  font-weight: 800;
  font-size: 24px;
  transition: color 0.25s ease;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.brand-sub {
  margin-top: 4px;
  font-size: 14px;
  font-weight: 600;
  color: #fff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Keep your original responsive sizes */
@media (max-width: 640px) {
  .header-logo {
    width: 48px;
    height: 48px;
    background-size: contain; /* scaled sprite for mobile */
  }
  .brand-title { font-size: 20px; }
  .brand-sub { font-size: 12px; }
}

/* === inline contact beside ISKO logo === */
.header-divider {
  width: 1px;
  height: 48px;
  background: rgba(255,255,255,.35);
  flex: 0 0 auto;
}

.header-contact-inline {
  display: flex;
  align-items: center;
  gap: 18px;
  color: #fff;
  flex: 0 0 auto;     /* don't steal space from logos */
  white-space: nowrap;
}

.contact-item { display: flex; align-items: center; gap: 8px; }
.contact-label { font-size: 12px; letter-spacing: .04em; text-transform: uppercase; opacity: .85; }
.contact-value a { color: #fff; font-weight: 700; text-decoration: none; }
.contact-value a:hover, .contact-value a:focus { text-decoration: underline; }

/* keep both logos visible on small screens */
@media (max-width: 740px) {
  .contact-label { display: none; }
  .contact-value a { font-weight: 600; font-size: 12px; }
}
@media (max-width: 520px) {
  .header-contact-inline { display: none; }  /* hide if super narrow */
}

    /* ========= MAIN ========= */
    main{
      flex:1; /* push footer to bottom */
      display:flex; justify-content:center; align-items:center;
      padding:24px;
    }

    .container{
      width:90%; max-width:1000px; height:auto;
      background:#fff; border-radius:20px;
      box-shadow:0 4px 10px rgba(0,0,0,0.1);
      overflow:hidden; display:flex; flex-direction:column;
    }

    .content{ padding:20px; flex:1; }

    .announcementsWrapper{
      width:100%; max-width:800px; margin:auto;
      display:flex; flex-direction:column; gap:15px;
      max-height:500px; padding-right:10px;
    }

    .announcementsWrapper h2{
      color:black; margin-bottom:10px; text-align:center; flex-shrink:0;
    }

    .announcementsList{
      display:flex; flex-direction:column; gap:20px;
      overflow-y:auto; padding-bottom:40px;
    }

    .announcement-card{
      width:100%; background:#fff; border-radius:12px; padding:15px 20px;
      box-shadow:0 4px 10px rgba(0,0,0,0.1); text-align:left; transition:transform .2s ease;
    }
    .announcement-card:hover{ transform:translateY(-4px); }

    /* Card rows (title, meta, content) */
    .announcement-card div:nth-child(1){
      font-weight:bold; font-size:1.1em; color:var(--maroon); margin-bottom:6px;
    }
    .announcement-card div:nth-child(2){
      font-size:.85em; color:black; font-weight:bold; margin-bottom:10px;
    }
    .announcement-card div:nth-child(3){
      font-size:1em; line-height:1.4em;
    }

    /* ========= FOOTER ========= */
    .site-footer{
      background:#fff;
      border-top:1px solid #000;
      outline:1px solid #000; outline-offset:-1px; /* 1px stroke around footer */
    }
    .footer-wrap{
      max-width:1200px; margin:0 auto; padding:14px 16px;
      display:flex; justify-content:center; align-items:center;
    }
    .footer-wrap img{ max-height:48px; width:auto; display:block; }
  </style>
</head>

<body>
    <!-- HEADER -->
 <header class="site-header">
  <div class="header-wrap">
    <div class="header-center">
      <!-- Left LOGO is the link (City site) -->
      <a class="header-logo logo-city"
         href="https://koronadal.gov.ph"
         target="_blank"
         aria-label="City of Koronadal"></a>

      <!-- Center text is plain text only -->
      <div class="brand-block">
        <div class="brand-title">CITY OF KORONADAL</div>
        <div class="brand-sub">Iskolar ng Koronadal - Kabugwason Paglaum Program</div>
      </div>

      <!-- Right LOGO is the link (ISKO-KPP Facebook) -->
      <a class="header-logo logo-isko"
         href="https://www.facebook.com/profile.php?id=100093335296692"
         target="_blank"
         aria-label="Iskolar ng Koronadal - Kabugwason Paglaum Program (Facebook)"></a>

<!-- inline contact info (now on the same row) -->
<div class="header-divider" aria-hidden="true"></div>
<div class="header-contact-inline" role="group" aria-label="Contact Information">
  <div class="contact-item">
    <div class="contact-label">Call Us</div>
    <div class="contact-value"><a href="tel:+63832286095">(083) 228 - 6095</a></div>
  </div>
  <div class="contact-item">
    <div class="contact-label">Email Us</div>
    <div class="contact-value"><a href="mailto:info.koronadalcity@gmail.com">info.koronadalcity@gmail.com</a></div>
  </div>
</div>

    </div>
  </div>
</header>

  <!-- MAIN -->
  <main>
    <div class="container">
      <div class="content">
        <div class="announcementsWrapper">
          <h2>Announcements</h2>
          <div class="announcementsList" id="announcements"></div>
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="footer-wrap">
      <img src="/assets/footer.png" alt="Footer Graphic">
    </div>
  </footer>

  <script>
    async function loadAnnouncements() {
      const list = document.getElementById('announcements');
      list.innerHTML = '';

      try {
        const res = await fetch('/announcements');
        const announcements = await res.json();

        if (!announcements || announcements.length === 0) {
          list.innerHTML = '<div>No announcements posted yet.</div>';
          return;
        }

        // newest first
        announcements.sort((a, b) => new Date(b.date) - new Date(a.date));

        announcements.forEach(a => {
          const el = document.createElement('div');
          el.className = 'announcement-card';

          const when = new Date(a.date).toLocaleDateString('en-US', {
            year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'
          });

          el.innerHTML = `
            <div>${a.title}</div>
            <div>${when} • ${a.category || 'General'}</div>
            <div>${a.content}</div>
          `;
          list.appendChild(el);
        });
      } catch (e) {
        list.innerHTML = '<div>Error loading announcements.</div>';
        console.error(e);
      }
    }

    window.onload = loadAnnouncements;
  </script>
</body>

</html>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scholar • Announcements</title>
  <style>
    :root{
      --gold:#D4A017;   /* golden yellow */
      --maroon:#800000; /* maroon red */
      --maroon-dark:#5a0000;
    }

    *{
      margin:0; padding:0; outline:none; border:none; text-decoration:none; box-sizing:border-box;
      font-family:Arial, Helvetica, sans-serif;
    }

    html, body { height:100%; }

    body{
      min-height:100vh;
      display:flex;
      flex-direction:column; /* header / main / footer */
      background-image:url('/assets/iskolarbg.png');
      background-size:cover;
      background-position:center;
      background-repeat:no-repeat;
    }

    /* ========= HEADER ========= */
    .site-header{
      position:sticky; top:0; z-index:1000;
      background:var(--maroon);
      border-bottom:2px solid var(--maroon-dark);
    }
    .header-wrap{
      max-width:1200px; margin:0 auto; padding:10px 16px;
      display:flex; justify-content:center; align-items:center;
    }
    .header-center{ display:flex; align-items:center; gap:18px; }
    .header-logo{
      height:64px; width:auto; flex:0 0 auto;
      filter:drop-shadow(0 1px 0 rgba(0,0,0,.1));
    }
    .brand-block{
      display:flex; flex-direction:column; align-items:center;
      line-height:1.15; text-align:center; color:#fff; user-select:none;
    }
    /* Main title link */
    .brand-block > a{
      color:#fff; text-decoration:none; font-weight:800; font-size:24px; letter-spacing:.5px;
      transition:color .25s ease;
    }
    .brand-block > a:hover{ color:var(--gold); }
    /* Subtext link */
    .brand-sub{ margin-top:4px; font-size:14px; font-weight:600; }
    .brand-sub a{ color:#fff; text-decoration:none; transition:color .25s ease; }
    .brand-sub a:hover{ color:var(--gold); }

    @media (max-width:640px){
      .header-logo{ height:48px; }
      .brand-block > a{ font-size:20px; }
      .brand-sub{ font-size:12px; }
    }

    /* ========= MAIN ========= */
    main{
      flex:1; /* push footer to bottom */
      display:flex; justify-content:center; align-items:center;
      padding:24px;
    }

    .container{
      width:90%; max-width:1000px; height:auto;
      background:#fff; border-radius:20px;
      box-shadow:0 4px 10px rgba(0,0,0,0.1);
      overflow:hidden; display:flex; flex-direction:column;
    }

    .content{ padding:20px; flex:1; }

    .announcementsWrapper{
      width:100%; max-width:800px; margin:auto;
      display:flex; flex-direction:column; gap:15px;
      max-height:500px; padding-right:10px;
    }

    .announcementsWrapper h2{
      color:black; margin-bottom:10px; text-align:center; flex-shrink:0;
    }

    .announcementsList{
      display:flex; flex-direction:column; gap:20px;
      overflow-y:auto; padding-bottom:40px;
    }

    .announcement-card{
      width:100%; background:#fff; border-radius:12px; padding:15px 20px;
      box-shadow:0 4px 10px rgba(0,0,0,0.1); text-align:left; transition:transform .2s ease;
    }
    .announcement-card:hover{ transform:translateY(-4px); }

    /* Card rows (title, meta, content) */
    .announcement-card div:nth-child(1){
      font-weight:bold; font-size:1.1em; color:var(--maroon); margin-bottom:6px;
    }
    .announcement-card div:nth-child(2){
      font-size:.85em; color:black; font-weight:bold; margin-bottom:10px;
    }
    .announcement-card div:nth-child(3){
      font-size:1em; line-height:1.4em;
    }

    /* ========= FOOTER ========= */
    .site-footer{
      background:#fff;
      border-top:1px solid #000;
      outline:1px solid #000; outline-offset:-1px; /* 1px stroke around footer */
    }
    .footer-wrap{
      max-width:1200px; margin:0 auto; padding:14px 16px;
      display:flex; justify-content:center; align-items:center;
    }
    .footer-wrap img{ max-height:48px; width:auto; display:block; }
  </style>
</head>

<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="header-wrap">
      <div class="header-center">
        <img class="header-logo" src="/assets/citylogo.png" alt="City of Koronadal Logo">
        <div class="brand-block">
          <a href="https://koronadal.gov.ph" target="_blank" rel="noopener noreferrer">
            CITY OF KORONADAL
          </a>
          <div class="brand-sub">
            <a href="https://www.facebook.com/profile.php?id=100093335296692" target="_blank" rel="noopener noreferrer">
              Iskolar ng Koronadal - Kabugwason Paglaum Program
            </a>
          </div>
        </div>
        <img class="header-logo" src="/assets/iskologo.png" alt="Isko-KPP Logo">
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main>
    <div class="container">
      <div class="content">
        <div class="announcementsWrapper">
          <h2>Announcements</h2>
          <div class="announcementsList" id="announcements"></div>
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="footer-wrap">
      <img src="/assets/footer.png" alt="Footer Graphic">
    </div>
  </footer>

  <script>
    async function loadAnnouncements() {
      const list = document.getElementById('announcements');
      list.innerHTML = '';

      try {
        const res = await fetch('/announcements');
        const announcements = await res.json();

        if (!announcements || announcements.length === 0) {
          list.innerHTML = '<div>No announcements posted yet.</div>';
          return;
        }

        // newest first
        announcements.sort((a, b) => new Date(b.date) - new Date(a.date));

        announcements.forEach(a => {
          const el = document.createElement('div');
          el.className = 'announcement-card';

          const when = new Date(a.date).toLocaleDateString('en-US', {
            year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'
          });

          el.innerHTML = `
            <div>${a.title}</div>
            <div>${when} • ${a.category || 'General'}</div>
            <div>${a.content}</div>
          `;
          list.appendChild(el);
        });
      } catch (e) {
        list.innerHTML = '<div>Error loading announcements.</div>';
        console.error(e);
      }
    }

    window.onload = loadAnnouncements;
  </script>
</body>

</html>

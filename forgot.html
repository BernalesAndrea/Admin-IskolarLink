<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Forgot Password</title>
  <style>
    body {
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh; margin: 0;
      background-image: url('/assets/iskolarbg.png');
      background-size: cover; background-position: center; background-repeat: no-repeat;
      font-family: Arial, Helvetica, sans-serif;
    }
    .container1 {
      width: 100%; max-width: 500px; height: auto;
      background-image: linear-gradient(to right, rgba(146,59,59,0.6), rgba(255,255,255,0.6));
      border-radius: 20px; display: flex; justify-content: center; align-items: center;
      padding: 20px; margin: auto;
    }
    .container11 {
      width: 100%; max-width: 400px; background: #fff; border-radius: 20px;
      padding: 30px; box-shadow: 0 8px 20px rgba(0,0,0,0.25); text-align: center;
    }
    .container111 { display: flex; flex-direction: column; align-items: center; gap: 15px; }
    .logo { display: flex; justify-content: center; align-items: center; gap: 5px; }
    .logo img { height: 55px; width: auto; }
    h1 { margin: 10px 0; }
    p { font-size: 16px; margin: 0; }
    .textBox {
      width: 100%; margin-bottom: 15px; position: relative; border-radius: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .textBox input, .submitButton {
      width: 100%; height: 45px; font-size: 16px; border-radius: 20px; box-sizing: border-box;
    }
    .textBox input {
      border: 2px solid black; outline: none; padding: 0 12px; color: black;
    }
    .textBox label {
      position: absolute; top: 50%; left: 12px; transform: translateY(-50%);
      font-size: 16px; color: black; background-color: white; padding: 0 5px;
      pointer-events: none; transition: 0.3s;
    }
    .textBox input:focus ~ label, .textBox input:valid ~ label {
      top: 0; font-size: 12px; background-color: #fff;
    }
    .submitButton {
      border: none; background-color: #923B3B; color: white; cursor: pointer; margin-bottom: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2); text-decoration: none; line-height: 45px; display: block; text-align: center;
    }
    .back-link, .link-inline {
      color: #923B3B; font-weight: bold; text-decoration: none; cursor: pointer; position: relative; display: inline-block;
    }
    .back-link::after, .link-inline::after {
      content: ""; position: absolute; bottom: 0; left: 0; height: 2px; width: 100%;
      background-color: #923B3B; transform: scaleX(0); transform-origin: left; transition: transform .3s ease-in-out;
    }
    .back-link:hover::after, .link-inline:hover::after { transform: scaleX(1); }
    #msg { font-size: 14px; margin-top: 6px; min-height: 18px; }
    .hint { font-size: 14px; color: #444; }
  </style>
</head>
<body>
  <div class="container1">
    <div class="container11">
      <div class="container111">
        <div class="logo">
          <img src="/assets/iskolarlink.png" alt="Iskolar Link Logo">
          <img src="/assets/iskologo.png" alt="Isko Logo">
          <img src="/assets/citylogo.png" alt="City Logo">
        </div>

        <h1>Forgot Password</h1>
        <p class="hint">Enter your account email. If it exists, we'll send a reset link.</p>

        <div class="textBox">
          <input type="email" id="email" required autocomplete="email" />
          <label>Email</label>
        </div>

        <a href="#" id="sendBtn" class="submitButton">Send Reset Link</a>
        <div id="msg"></div>

        <a class="back-link" href="/">Back to Login</a>
      </div>
    </div>
  </div>

<script>
  const sendBtn = document.getElementById("sendBtn");
  const emailEl = document.getElementById("email");
  const msg = document.getElementById("msg");

  sendBtn.addEventListener("click", async (e) => {
    e.preventDefault();
    const email = emailEl.value.trim();
    if (!email) {
      msg.textContent = "Please enter your email.";
      return;
    }
    sendBtn.textContent = "Sending...";
    sendBtn.style.pointerEvents = "none";

    try {
      const res = await fetch("/api/auth/forgot-password", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email })
      });
      const data = await res.json().catch(() => ({}));
      msg.textContent = data.msg || "If that email exists, we sent a reset link.";
    } catch (err) {
      msg.textContent = "If that email exists, we sent a reset link.";
    } finally {
      sendBtn.textContent = "Send Reset Link";
      sendBtn.style.pointerEvents = "auto";
    }
  });

   emailEl.addEventListener("keydown", (e) => {
    if (e.key === "Enter") sendBtn.click();
  });
</script>
</body>
</html>
